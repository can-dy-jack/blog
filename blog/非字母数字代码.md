---
title: JavaScript 非字母数字代码
slug: js-non-alphanumeric-code
date: "2022-12-17"
tag: 
- Non-alphanumeric code
- js
cate: js
---
JavaScript是一种松散类型的语言，它可以：
- 类似于 `true+true == 2` 可以不使用数字字面量来获取数字。
- `+` 符号 可以将对象类型转为字符串类型
- `''+{} == '[object Object]'`
- 可以不用字符字面量来获取字符，例子：`[object Object][1] == 'o'`
- `'abc'[0] == 'a'`

以上，我们完全可以不使用数字和字母字面量来写一些js代码！

## 获取数字
获取数字 `0` 比较简单，`+[]` 即为 `0`；  
为了获取数字 `1` 就需要使用 `!` ，`+!![] == 1` 或 `+!+[]` 等都为 `1` 。

要获取除 `0` `1` 之外的数字，只需要使用加法即可。`2 = 1 + 1` （~废话~） 即：`+!+[]+!+[]` 。

## 获取字母
如果要是获取字母该如何？

其实有个技巧，我们可以利用js的特点，在某些情况下js或默认调用 `toString()` 或 `valueOf()` 函数，我们可以利用其获取字母。

例如，可以利用数组下标越界来获取类型 `undefined` ，然后将其隐式转换为字符串 `'undefined'` ，这样的话，我们就可以获取到 `u` `n` `d` `e` `f` 等字母！

看下面例子：
```js
// 获取 'f'
console.log([[][+!+[]]+[]][+[]][+!+[]+!+[]+!+[]+!+[]]) // 'f' 
```
解析：
- 首先，设置一个空数组： `[]`
- 接着读取其第一个位置： `[][+!+[]]` ，因为为空，所以会返回  `undefined`
- 当对象类型`+`上一个`''` 时会将其转换为字符串：`[][+!+[]]+[]`，得到字符串 `'undefined'`
- 这里我们为了避免使用括号，而是使用中括号将其包围成一个数组，然后 `[+[]]` 读取第0个位置，即 `undefined`;方面后续取下标
- 为了得到字符 `f` ，需要读取字符串下标为 `4` 的位置：`[[][+!+[]]+[]][+[]][+!+[]+!+[]+!+[]+!+[]]`

这里我们只使用三种符号 `[]` `+` `!` 即可表示字符 `f`，amazing！

## 非字母数字代码
有了以上的铺垫，现在我们可以做一些不可思议的事情：

例如，调用 `slice()` 函数
```js
let _slice = [][[![]+[]][+[]][!+[]+!+[]+!+[]]+[![]+[]][+[]][!+[]+!+[]]+[[][+!+[]]+[]][+[]][+!+[]+!+[]+!+[]+!+[]+!+[]]+ [[[]+[]][+[]]+{}][+[]][+!+[]+!+[]+!+[]+!+[]+!+[]]+[![]+[]][+[]][!+[]+!+[]+!+[]+!+[]]] // ƒ slice() { [native code] }

// 测试
let arr = [1,2,3,4];
console.log(_slice.call(arr, 2)) // [ 3, 4 ]
```

访问Function构造函数：
```js
[][[[][[[][[]]+[]][+[]][!+[]+!+[]+!+[]+!+[]]+[[][[]]+[]][+[]][!+[]+!+[]+!+[]+!+[]+!+[]]+[[][[]]+[]][+[]][!+[]+!+[]+!+[]+!+[]+!+[]+!+[]]+[[][[]]+[]][+[]][!+[]+!+[]]]+[]][+[]][!+[]+!+[]+!+[]]+[[]+{}][+[]][+!+[]]+[[][[]]+[]][+[]][!+[]+!+[]+!+[]+!+[]+!+[]+!+[]]+[![]+[]][+[]][!+[]+!+[]+!+[]]+[!![]+[]][+[]][+[]]+[!![]+[]][+[]][+!+[]]+[[][[]]+[]][+[]][+[]]+[[][[[][[]]+[]][+[]][!+[]+!+[]+!+[]+!+[]]+[[][[]]+[]][+[]][!+[]+!+[]+!+[]+!+[]+!+[]]+[[][[]]+[]][+[]][!+[]+!+[]+!+[]+!+[]+!+[]+!+[]]+[[][[]]+[]][+[]][!+[]+!+[]]]+[]][+[]][!+[]+!+[]+!+[]]+[!![]+[]][+[]][+[]]+[[]+{}][+[]][+!+[]]+[!![]+[]][+[]][+!+[]]][[[][[[][[]]+[]][+[]][!+[]+!+[]+!+[]+!+[]]+[[][[]]+[]][+[]][!+[]+!+[]+!+[]+!+[]+!+[]]+[[][[]]+[]][+[]][!+[]+!+[]+!+[]+!+[]+!+[]+!+[]]+[[][[]]+[]][+[]][!+[]+!+[]]]+[]][+[]][!+[]+!+[]+!+[]]+[[]+{}][+[]][+!+[]]+[[][[]]+[]][+[]][!+[]+!+[]+!+[]+!+[]+!+[]+!+[]]+[![]+[]][+[]][!+[]+!+[]+!+[]]+[!![]+[]][+[]][+[]]+[!![]+[]][+[]][+!+[]]+[[][[]]+[]][+[]][+[]]+[[][[[][[]]+[]][+[]][!+[]+!+[]+!+[]+!+[]]+[[][[]]+[]][+[]][!+[]+!+[]+!+[]+!+[]+!+[]]+[[][[]]+[]][+[]][!+[]+!+[]+!+[]+!+[]+!+[]+!+[]]+[[][[]]+[]][+[]][!+[]+!+[]]]+[]][+[]][!+[]+!+[]+!+[]]+[!![]+[]][+[]][+[]]+[[]+{}][+[]][+!+[]]+[!![]+[]][+[]][+!+[]]]
// ƒ Function() { [native code] }
```

## 参考文献
- [Executing non-alphanumeric JavaScript without parenthesis](https://portswigger.net/research/executing-non-alphanumeric-javascript-without-parenthesis)
- [Array - JavaScript | MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array)
